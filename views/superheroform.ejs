<!-- views/form.ejs  -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User Form</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
</head>

<body>
  <div class="container">
    <div class="form-container">
      <div class="card shadow">
        <div class="card-header bg-primary text-white">
          <h2 class="card-title mb-0">
            <i class="bi bi-android2 me-2"></i>
            User Registration Form
          </h2>
        </div>
        <div class="card-body">
            <form id="heroForm">
              <label>Super Name:</label>
              <i class="bi bi-pencil-square"></i>
              <input type="text" value="super man" name="superName" pattern="^[a-zA-Z\s]{2,50}$" required><br>

              <label>Real Name:</label>
              <i class="bi bi-pencil-square"></i>
              <input type="text" value="klark Kent" name="realName" pattern="^[a-zA-Z\s]{2,50}$" required><br>

              <label>Superpower:</label>
              <i class="bi bi-sun"></i>
              <input type="text" value="flight" name="superpower" pattern="^[A-Za-z]{2,50}$" required><br>

              <label>Power Level:</label>
              <i class="bi bi-lightning"></i>
              <input type="number" value="10" name="powerLevel" pattern="^{1,10}$" required maxlength="10"><br>

              <label>Secret Identity:</label>
              <i class="bi bi-person-fill-lock"></i>
              <select name="secretIdentity">
                <option value="true">Yes</option>
                <option value="false">No</option>
              </select>
              <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <button type="reset" class="btn btn-outline-secondary me-md-2">
                  <i class="bi bi-arrow-clockwise me-1"></i>
                  Reset Form
                </button>
                <button class="btn btn-primary" id="submitBtn" type="submit">
                  <i class="bi bi-person-check me-1"></i>
                  Add hero
                </button>
              </div>
            </form>


          <button id="redir">Hero List</button>
        </div>
      </div>
    </div>
  </div>
  <script>
     document.getElementById('redir').onclick = function() {
      window.location.href = '/superherolist';
    };

    const form = document.getElementById('heroForm');

form.addEventListener('submit', async (e) => {
  e.preventDefault(); // stop page reload

  const formData = new FormData(form);
  const data = Object.fromEntries(formData.entries());
  const res = await fetch('/superheroform', {
        method: 'POST',
        headers: { 'Content-Type':'application/json' },
        body: JSON.stringify(data)
      });


  const result = await res.json();
  if (result.success) {
    console.log('working')
    form.reset(); // clear inputs
  } else {
    console.log("fail")
  }
});
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- <script src="final-validation.js"></script> -->
</body>
</html>