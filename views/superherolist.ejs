<!-- views/heroList.ejs -->
<%const heroes = Superman = [{superName: "SuperMan",realName: "Clark Kent",superpower: "Super strength, flying, lazer eyes, super breath, super vision and super hearing.",powerLevel: "10",secredIdentity: "yes",},{superName: "SuperMan",realName: "Clark Kent",superpower: "Super strength, flying, lazer eyes, super breath, super vision and super hearing.",powerLevel: "10",secredIdentity: "yes",}];%>
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>super hero List</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <h1>Heroes</h1>
<div style="display: flex;">
    <% heroes.forEach(hero => { %>
      <ul class="list-group" style="width: 300px;">
        <li class="list-group-item active">Super Name:<strong> <%= hero.superName %></strong></i>
        <li class="list-group-item">Real Name:<strong> <%= hero.realName %></strong></i>
        <li class="list-group-item">Superpower:<strong> <%= hero.superpower %></strong></i>
        <li class="list-group-item">Power Level:<strong> <%= hero.powerLevel %></strong></i>
        <li class="list-group-item"></i>
          <button onclick="deleteHero('<%= hero._id %>')">Delete</button>
      </ul>

      <br>
    <% }) %>
    </div>
  <button type="button" id="redir">Add hero</button>
  <script>
    document.getElementById('redir').onclick = function() {
      window.location.href = '/superheroform';
    };
function deleteHero(id) {
  fetch(`/heroes/${id}`, { method: 'DELETE' })
    .then(res => res.json())
    .then(data => {
      if (data.success) {
        document.getElementById(`hero-${id}`).remove();
      } else {
        alert('Failed to delete hero');
      }
    })
    .catch(err => console.error(err));
}
  </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>